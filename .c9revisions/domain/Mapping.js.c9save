{"ts":1352768484765,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var Store = require('../lib/Store');\n\nvar PointStore = Store('Point', {\n    title: { type: String, index: true },\n    user_id: { type: String, index: true },\n    mapping_id: { type: String, index: true },\n    address: { type: String, default: '' },\n    description: { type: String, index: true, default: '' },\n    loc: { type: Array, index: '2d' },\n    video: { type: Array },\n    audio: { type: Array },\n    image: { type: Array },\n    created: { type: Date, default: Date.now },\n    modified: { type: Date, default: Date.now }\n});\n\nvar MappingStore = Store('Mapping', {\n    title: { type: String, index: true },\n    user_id: { type: String, index: true },\n    description: { type: String },\n    points: { type: [PointStore.schema] },\n    created: { type: Date, default: Date.now },\n    modified: { type: Date, default: Date.now }\n});\n\nvar Mapping = function() {\n};\n\nMapping.addPoint = function(mapping_id, point, callback) {\n    MappingStore.findById(mapping_id, function(err, mapping) {\n        mapping.points.push(point);\n        mapping.save(function(err, ok) {\n            if(callback) callback(err, ok);\n        });\n    });\n};\n\nMapping.addPhoto = function(mapping_id, point_id, name, callback) {\n    MappingStore.findById(mapping_id, function(err, mapping) {\n        var point = mapping.points.id(point_id);\n        point.image.push(name);\n        mapping.save(function(err, ok) {\n            if(callback) callback(err, ok);\n        });\n    });\n};\n\nmodule.exports = {\n    domain: Mapping,\n    store: MappingStore\n}"]],"start1":0,"start2":0,"length1":0,"length2":1521}]],"length":1521}
{"contributors":[],"silentsave":false,"ts":1352768520450,"patch":[[{"diffs":[[0,");\n\nvar "],[-1,"Point"],[1,"Offering"],[0,"Store = "]],"start1":34,"start2":34,"length1":21,"length2":24},{"diffs":[[0,"var "],[-1,"MappingStore = Store('Mapping', {\n    title: { type: String, index: true },\n    user_id: { type: String, index: true },\n    description: { type: String },\n    points: { type: [PointStore.schema] },\n    created: { type: Date, default: Date.now },\n    modified: { type: Date, default: Date.now }\n});\n\nvar Mapp"],[1,"Offer"],[0,"ing "]],"start1":537,"start2":537,"length1":315,"length2":13}]],"length":1222,"saved":false}
{"ts":1352768532873,"patch":[[{"diffs":[[0,"};\n\n"],[-1,"Mapping.addPoint = function(mapping_id, point, callback) {\n    MappingStore.findById(mapping_id, function(err, mapping) {\n        mapping.points.push(point);\n        mapping.save(function(err, ok) {\n            if(callback) callback(err, ok);\n        });\n    });\n};\n\nMapping.addPhoto = function(mapping_id, point_id, name, callback) {\n    MappingStore.findById(mapping_id, function(err, mapping) {\n        var point = mapping.points.id(point_id);\n        point.image.push(name);\n        mapping.save(function(err, ok) {\n            if(callback) callback(err, ok);\n        });\n    });\n};\n\n"],[0,"modu"]],"start1":565,"start2":565,"length1":596,"length2":8}]],"length":634,"saved":false}
{"ts":1352768539332,"patch":[[{"diffs":[[0,"domain: "],[-1,"Mapp"],[1,"Offer"],[0,"ing,\n   "]],"start1":592,"start2":592,"length1":20,"length2":21},{"diffs":[[0,"re: "],[-1,"Mapp"],[1,"Offer"],[0,"ingS"]],"start1":617,"start2":617,"length1":12,"length2":13}]],"length":636,"saved":false}
{"ts":1352768664221,"patch":[[{"diffs":[[0,"    "],[-1,"titl"],[1,"nam"],[0,"e: {"]],"start1":75,"start2":75,"length1":12,"length2":11}]],"length":635,"saved":false}
{"ts":1352768693997,"patch":[[{"diffs":[[0,"ex: '2d' },\n"],[1,"    logo: String,\n"],[0,"    video: {"]],"start1":339,"start2":339,"length1":24,"length2":42}]],"length":653,"saved":false}
