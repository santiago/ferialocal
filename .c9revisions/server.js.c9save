{"ts":1352769309331,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/**\n * Module dependencies.\n */\n\nvar express = require('express');\nvar everyauth = require('everyauth');\nvar stylus = require('stylus');\nvar nib = require('nib');\nvar app = module.exports = express();\n\nvar env = require('./env');\napp.env = env;\n\n// Configuration\nfunction compile(str, path) {\n    return stylus(str)\n\t.set('filename', path)\n\t.set('compress', true)\n    .use(nib())\n}\n\n// Start Auth\nrequire('./lib/Auth')(app);\n\napp.configure(function() {\n    this.set('views', __dirname + '/views');\n    this.set('view engine', 'jade');\n    \n    // bodyParser without multipart\n    this.use(express.json());\n    this.use(express.urlencoded());\n \n    this.use(express.logger());\n    this.use(express.methodOverride());\n    this.use(express.cookieParser('Eah4tfzGAKhr'));\n    this.use(express.session());\n    this.use(stylus.middleware({\n\t    src: __dirname + '/views', \n        dest: __dirname + '/public', \n        compile: compile\n    }));\n    this.use(express.favicon(__dirname + '/public/favicon.ico', { maxAge: 2592000000 }));\n    this.use(express.static(__dirname + '/public'));\n\n    this.use(everyauth.middleware());\n    // Keep this as last one\n    this.use(this.router);\n});\n\napp.configure('development', function() {\n    app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); \n});\n\napp.configure('production', function(){\n  app.use(express.errorHandler());\n});\n\napp.get('/', function(req, res) {\n\tres.render('index', {\n\t\t    nodes: [],\n            everyauth: req.session.auth||{}\n\t    }\n    );\n});\n\nvar templates = require('./templates');\napp.get('/javascripts/compiled_tpls.js', function(req, res) {\n    res.header('Content-Type', 'text/javascript');\n    res.send(templates);\n});\n\n// Start Services\napp.services = {};\n['Mapping'].forEach(function(name) {\n    var services = require('./service/'+name);\n    if (!(services instanceof Array)) {\n        services = [services]\n    }\n    services.forEach(function(s) {\n        app.services[name] = s(app);\n    });\n});\n\n// require('./lib/Upload')\n\n// Only listen on $ node app.js\nif (!module.parent) {\n    var port = 6660;\n    app.listen(port);\n    console.log(\"Express server listening on port %d\", port)\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":2178}]],"length":2178}
{"contributors":[],"silentsave":false,"ts":1352769323196,"patch":[[{"diffs":[[0,");\n\n"],[-1,"// require('./lib/Upload')\n"],[0,"\n// "]],"start1":1986,"start2":1986,"length1":35,"length2":8}]],"length":2151,"saved":false}
{"ts":1352769346884,"patch":[[{"diffs":[[0,";\n['"],[-1,"Mapp"],[1,"Offer"],[0,"ing'"]],"start1":1743,"start2":1743,"length1":12,"length2":13}]],"length":2152,"saved":false}
{"ts":1352769371216,"patch":[[{"diffs":[[0,"{\n\t\t    "],[-1,"nod"],[1,"categori"],[0,"es: [],\n"]],"start1":1443,"start2":1443,"length1":19,"length2":24}]],"length":2157,"saved":false}
{"ts":1352773763589,"patch":[[{"diffs":[[0,"ories: ["],[1,"'Accesorios y Objetos','Gastronomía y Productos Comestibles','Marroquinería y Calzado','Vestuario', 'Joyería', 'Servicios', 'Otra'"],[0,"],\n     "]],"start1":1456,"start2":1456,"length1":16,"length2":146}]],"length":2287,"saved":false}
{"ts":1352773765967,"patch":[[{"diffs":[[0,"s', 'Otr"],[-1,"a"],[1,"os"],[0,"'],\n    "]],"start1":1584,"start2":1584,"length1":17,"length2":18}]],"length":2288,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352792325881,"patch":[[{"diffs":[[0,";\n['"],[-1,"Offering"],[1,"Shop"],[0,"'].f"]],"start1":1879,"start2":1879,"length1":16,"length2":12}]],"length":2284,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352822127613,"patch":[[{"diffs":[[0,"\n['Shop'"],[1,",'Comment'"],[0,"].forEac"]],"start1":1880,"start2":1880,"length1":16,"length2":26}]],"length":2294,"saved":false}
